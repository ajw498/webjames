
# Makefile for WebJames the web server

CC            = cc

MemCheck = MemCheck.cc
# possible flags:
# ANTRESOLVER     use the ANT resolver module API for reverse DNS
# LOG             enable logging
# SYSLOG          use SysLog instead of internal log

#CCFlags       = -c -throwback -depend !Depend -IC: -strict -fah -IOSLib: -DANTRESOLVER -DLOG -DSYSLOG -Otime
#CCFlags       = -c -throwback -depend !Depend -IC: -strict -fah -IOSLib: -DLOG -DSYSLOG -Otime
#CCFlags       = -c -throwback -depend !Depend -IC: -strict -fah -IOSLib: -DLOG -Otime
CCFlags       = -c -throwback -depend !Depend -IC: -g -strict -fah -IOSLib: -DLOG
LinkFlags     = -o $@

Libs          = OSLib:o.OSLib C:o.Stubs C:o.socklib MemCheck:o.MC C:regex.a.libregex
Objects       = main.o webjames.o ip.o stat.o report.o write.o openclose.o read.o cache.o coding.o mimemap.o attributes.o resolve.o cacheheap.o handler.o staticcontent.o webjamesscript.o cgiscript.o

!RunImage:    $(Objects)
              DrLink -d $(Linkflags) $(Objects) $(Libs)

#              Squeeze -f -v !RunImage

.c.o:
	$(MemCheck) $(CC) $(CCFlags) $< -o $@

# Dynamic dependencies:
o.staticcontent:	c.staticcontent
o.staticcontent:	C:h.stdio
o.staticcontent:	C:h.stdlib
o.staticcontent:	C:h.string
o.staticcontent:	C:h.ctype
o.staticcontent:	C:h.time
o.staticcontent:	h.webjames
o.staticcontent:	h.ip
o.staticcontent:	h.openclose
o.staticcontent:	h.stat
o.staticcontent:	h.report
o.staticcontent:	h.cache
o.staticcontent:	h.staticcontent
o.webjamesscript:	c.webjamesscript
o.webjamesscript:	MemCheck:h.MemCheck
o.webjamesscript:	C:h.stddef
o.webjamesscript:	C:h.stdio
o.webjamesscript:	C:h.stdarg
o.webjamesscript:	C:h.stdio
o.webjamesscript:	C:h.stdlib
o.webjamesscript:	C:h.string
o.webjamesscript:	C:h.ctype
o.webjamesscript:	C:h.time
o.webjamesscript:	OSLib:h.os
o.webjamesscript:	OSLib:h.types
o.webjamesscript:	OSLib:h.osfile
o.webjamesscript:	OSLib:h.fileswitch
o.webjamesscript:	OSLib:h.osfscontrol
o.webjamesscript:	OSLib:h.osmodule
o.webjamesscript:	OSLib:h.wimp
o.webjamesscript:	OSLib:h.osspriteop
o.webjamesscript:	OSLib:h.font
o.webjamesscript:	h.webjames
o.webjamesscript:	h.webjamesscript
o.webjamesscript:	h.openclose
o.webjamesscript:	h.report
o.webjamesscript:	h.stat
o.webjamesscript:	h.ip
o.webjamesscript:	h.write
o.cgiscript:	c.cgiscript
o.cgiscript:	C:h.stdio
o.cgiscript:	C:h.stdlib
o.cgiscript:	C:h.string
o.cgiscript:	C:h.ctype
o.cgiscript:	C:h.time
o.cgiscript:	OSLib:h.os
o.cgiscript:	OSLib:h.types
o.cgiscript:	OSLib:h.osfile
o.cgiscript:	OSLib:h.fileswitch
o.cgiscript:	OSLib:h.osfscontrol
o.cgiscript:	OSLib:h.osmodule
o.cgiscript:	OSLib:h.wimp
o.cgiscript:	OSLib:h.osspriteop
o.cgiscript:	OSLib:h.font
o.cgiscript:	h.webjames
o.cgiscript:	h.cgiscript
o.cgiscript:	h.openclose
o.cgiscript:	h.report
o.cgiscript:	h.stat
o.cgiscript:	h.ip
o.cgiscript:	h.write
o.resolve:	c.resolve
o.resolve:	C:h.string
o.resolve:	C:h.stdio
o.resolve:	C:h.time
o.resolve:	h.stat
o.resolve:	h.webjames
o.resolve:	h.resolve
o.resolve:	h.ip
o.cacheheap:	c.cacheheap
o.cacheheap:	C:h.stdio
o.cacheheap:	C:h.swis
o.cacheheap:	C:h.kernel
o.cacheheap:	h.cacheheap
o.handler:	c.handler
o.handler:	C:h.stdio
o.handler:	C:h.stdlib
o.handler:	C:h.string
o.handler:	C:h.ctype
o.handler:	C:h.time
o.handler:	h.webjames
o.handler:	h.handler
o.handler:	h.staticcontent
o.handler:	h.cgiscript
o.handler:	h.webjamesscript
o.cache:	c.cache
o.cache:	MemCheck:h.MemCheck
o.cache:	C:h.stddef
o.cache:	C:h.stdio
o.cache:	C:h.stdarg
o.cache:	C:h.stdio
o.cache:	C:h.stdlib
o.cache:	C:h.string
o.cache:	C:h.time
o.cache:	OSLib:h.os
o.cache:	OSLib:h.types
o.cache:	OSLib:h.wimp
o.cache:	OSLib:h.osspriteop
o.cache:	OSLib:h.font
o.cache:	OSLib:h.fileswitch
o.cache:	OSLib:h.osfile
o.cache:	OSLib:h.osfscontrol
o.cache:	h.webjames
o.cache:	h.cache
o.cache:	h.write
o.cache:	h.cacheheap
o.cache:	h.stat
o.cache:	h.mimemap
o.coding:	c.coding
o.coding:	h.coding
o.mimemap:	c.mimemap
o.mimemap:	h.mimemap
o.mimemap:	C:h.kernel
o.attributes:	c.attributes
o.attributes:	C:h.stdio
o.attributes:	C:h.stdlib
o.attributes:	C:h.string
o.attributes:	C:h.ctype
o.attributes:	C:h.time
o.attributes:	h.webjames
o.attributes:	h.write
o.attributes:	h.attributes
o.attributes:	C:regex.h.regex
o.attributes:	h.stat
o.attributes:	h.handler
o.attributes:	OSLib:h.osfscontrol
o.attributes:	OSLib:h.types
o.attributes:	OSLib:h.os
o.attributes:	OSLib:h.fileswitch
o.read:	c.read
o.read:	C:h.stdio
o.read:	C:h.stdlib
o.read:	C:h.string
o.read:	C:h.ctype
o.read:	C:h.time
o.read:	h.webjames
o.read:	h.attributes
o.read:	C:regex.h.regex
o.read:	h.stat
o.read:	h.ip
o.read:	h.read
o.read:	h.report
o.read:	h.write
o.read:	h.coding
o.openclose:	c.openclose
o.openclose:	C:h.stdio
o.openclose:	C:h.stdlib
o.openclose:	C:h.string
o.openclose:	C:h.ctype
o.openclose:	C:h.time
o.openclose:	h.cache
o.openclose:	h.webjames
o.openclose:	h.ip
o.openclose:	h.attributes
o.openclose:	C:regex.h.regex
o.openclose:	h.stat
o.openclose:	h.openclose
o.openclose:	h.resolve
o.main:	c.main
o.main:	MemCheck:h.MemCheck
o.main:	C:h.stddef
o.main:	C:h.stdio
o.main:	C:h.stdarg
o.main:	C:h.time
o.main:	C:h.ctype
o.main:	C:h.stdio
o.main:	C:h.string
o.main:	C:h.stdlib
o.main:	OSLib:h.os
o.main:	OSLib:h.types
o.main:	OSLib:h.wimp
o.main:	OSLib:h.osspriteop
o.main:	OSLib:h.font
o.main:	h.main
o.main:	h.webjames
o.main:	h.global
o.webjames:	c.webjames
o.webjames:	C:h.stdio
o.webjames:	C:h.stdlib
o.webjames:	C:h.string
o.webjames:	C:h.ctype
o.webjames:	C:h.time
o.webjames:	OSLib:h.os
o.webjames:	OSLib:h.types
o.webjames:	OSLib:h.osmodule
o.webjames:	OSLib:h.osfscontrol
o.webjames:	OSLib:h.fileswitch
o.webjames:	OSLib:h.territory
o.webjames:	h.global
o.webjames:	h.cache
o.webjames:	h.webjames
o.webjames:	h.ip
o.webjames:	h.stat
o.webjames:	h.report
o.webjames:	h.write
o.webjames:	h.read
o.webjames:	h.openclose
o.webjames:	h.attributes
o.webjames:	C:regex.h.regex
o.webjames:	h.resolve
o.webjames:	h.handler
o.ip:	c.ip
o.ip:	C:h.stdio
o.ip:	C:h.string
o.ip:	C:h.stdlib
o.ip:	OSLib:h.socket
o.ip:	OSLib:h.types
o.ip:	OSLib:h.os
o.ip:	h.ip
o.stat:	c.stat
o.stat:	C:h.time
o.stat:	C:h.stdio
o.stat:	C:h.stdlib
o.stat:	C:h.string
o.stat:	OSLib:h.os
o.stat:	OSLib:h.types
o.stat:	h.webjames
o.stat:	h.stat
o.stat:	h.ip
o.stat:	C:h.kernel
o.report:	c.report
o.report:	C:h.stdio
o.report:	C:h.string
o.report:	C:h.time
o.report:	C:h.stdlib
o.report:	h.cache
o.report:	h.stat
o.report:	h.webjames
o.report:	h.ip
o.report:	h.openclose
o.report:	h.report
o.report:	h.write
o.report:	h.attributes
o.report:	C:regex.h.regex
o.report:	h.handler
o.write:	c.write
o.write:	C:h.stdio
o.write:	C:h.stdlib
o.write:	C:h.string
o.write:	C:h.ctype
o.write:	C:h.time
o.write:	OSLib:h.osfile
o.write:	OSLib:h.types
o.write:	OSLib:h.os
o.write:	OSLib:h.fileswitch
o.write:	OSLib:h.osgbpb
o.write:	OSLib:h.osfscontrol
o.write:	h.webjames
o.write:	h.cache
o.write:	h.ip
o.write:	h.openclose
o.write:	h.stat
o.write:	h.attributes
o.write:	C:regex.h.regex
o.write:	h.report
o.write:	h.write
o.write:	h.mimemap
o.write:	h.handler
